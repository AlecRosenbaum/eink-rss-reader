{% extends "base.html" %}

{% block title %}{{ article.title or "Article" }} - E-Ink Reader{% endblock %}

{% block header_controls %}
<form method="post" action="/article/{{ article.id }}/unread" style="display:inline;margin:0">
    <input type="hidden" name="redirect" value="{{ back_url }}">
    <button type="submit" class="nav-btn nav-icon" title="Mark Unread">✉</button>
</form>
{% if article.link %}
<a href="{{ article.link }}" class="nav-btn nav-icon" target="_blank" title="Open Original">➚</a>
{% endif %}
{% endblock %}

{% block header_nav %}
<a href="/feeds/{{ article.feed_id }}" class="nav-btn">Feed</a>
<a href="/settings" class="nav-btn">Settings</a>
{% endblock %}

{% block content %}
<article>
    <header class="article-header">
        <h1>{{ article.title or "Untitled" }}</h1>
        <div class="article-meta">
            {{ article.feed_title or "Unknown feed" }} &middot;
            {{ article.published_at | relative_time }}
        </div>
    </header>

    <div class="article-content">
        {% if article.content %}
        {{ article.content | safe }}
        {% elif article.summary %}
        <p>{{ article.summary }}</p>
        {% if article.link %}
        <p><a href="{{ article.link }}" target="_blank">Read full article &rarr;</a></p>
        {% endif %}
        {% else %}
        <p class="empty-state">No content available.</p>
        {% if article.link %}
        <p><a href="{{ article.link }}" target="_blank">Read full article &rarr;</a></p>
        {% endif %}
        {% endif %}
    </div>
</article>
{% endblock %}
